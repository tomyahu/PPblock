<html>
<head>
<title>PPBlock.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #f8f8f2; font-weight: normal; font-style: normal; }
.s0 { color: rgb(102,217,239); font-style: italic; }
.s1 { color: rgb(248,248,242); }
.s2 { color: rgb(249,38,114); }
.s3 { color: rgb(117,113,94); }
.s4 { color: rgb(165,194,97); }
.s5 { color: rgb(204,120,50); }
.s6 { color: rgb(174,129,255); }
</style>
</head>
<BODY BGCOLOR="#272822">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
PPBlock.py</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">import </span><span class="s1">os 
</span><span class="s0">import </span><span class="s1">pygame 
</span><span class="s0">from </span><span class="s1">pygame.locals </span><span class="s0">import </span><span class="s2">*</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">consts </span><span class="s0">import </span><span class="s2">*</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">math </span><span class="s0">import </span><span class="s2">*</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">random </span><span class="s0">import </span><span class="s1">randint 
 
</span><span class="s3">#Importar Imagenes y sonidos</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">imageBank </span><span class="s0">import </span><span class="s2">*</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">soundBank </span><span class="s0">import </span><span class="s2">*</span><span class="s1"> 
 
</span><span class="s3">#Importar Objetos</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">Bolita </span><span class="s0">import </span><span class="s1">Bola 
</span><span class="s0">from </span><span class="s1">Casilla </span><span class="s0">import </span><span class="s1">Casilla 
</span><span class="s0">from </span><span class="s1">Player </span><span class="s0">import </span><span class="s1">player 
</span><span class="s0">from </span><span class="s1">Button </span><span class="s0">import </span><span class="s2">*</span><span class="s1"> 
</span><span class="s0">from </span><span class="s1">matCas </span><span class="s0">import </span><span class="s1">MatCas 
 
</span><span class="s3"># Se inician modulos</span><span class="s1"> 
pygame.init() 
os.environ[</span><span class="s4">'SDL_VIDEO_CENTERED'</span><span class="s1">] </span><span class="s2">= </span><span class="s4">'1'</span><span class="s1"> 
 
</span><span class="s3"># Se inicia la pantalla</span><span class="s1"> 
surface </span><span class="s2">= </span><span class="s1">pygame.display.set_mode((winWidth</span><span class="s5">, </span><span class="s1">winHeight)) 
pygame.display.set_caption(</span><span class="s4">'PP-Block'</span><span class="s1">) 
 
</span><span class="s3"># Se crea el reloj</span><span class="s1"> 
clock </span><span class="s2">= </span><span class="s1">pygame.time.Clock() 
 
</span><span class="s3"># Mouse y teclas</span><span class="s1"> 
mouse </span><span class="s2">= </span><span class="s1">pygame.mouse 
keys </span><span class="s2">= </span><span class="s1">pygame.key 
 
</span><span class="s3">########PRUEBA</span><span class="s1"> 
player1 </span><span class="s2">= </span><span class="s1">player(surface</span><span class="s5">,</span><span class="s1">pokebola</span><span class="s5">,</span><span class="s1">flecha) 
Mat </span><span class="s2">= </span><span class="s1">MatCas(surface</span><span class="s5">,</span><span class="s1">player1) 
Mat.nextLevel() 
pausa </span><span class="s2">= </span><span class="s1">Button(winWidth</span><span class="s2">-</span><span class="s6">30</span><span class="s5">,</span><span class="s1">marUp</span><span class="s2">/</span><span class="s6">2</span><span class="s5">,</span><span class="s1">pausaTex</span><span class="s5">,</span><span class="s1">surface) 
 
</span><span class="s3">#Contador 1</span><span class="s1"> 
a </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
b </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
c </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
</span><span class="s0">def </span><span class="s1">Menu()</span><span class="s2">:</span><span class="s1"> 
 
    play </span><span class="s2">= </span><span class="s1">Button(winWidth</span><span class="s2">/</span><span class="s6">2</span><span class="s5">,</span><span class="s6">375</span><span class="s5">,</span><span class="s1">playTex</span><span class="s5">,</span><span class="s1">surface) 
    restart </span><span class="s2">= </span><span class="s1">Button(winWidth </span><span class="s2">/ </span><span class="s6">2</span><span class="s5">, </span><span class="s6">275</span><span class="s5">, </span><span class="s1">restartTex</span><span class="s5">, </span><span class="s1">surface) 
    quitB </span><span class="s2">= </span><span class="s1">Button(winWidth </span><span class="s2">/ </span><span class="s6">2</span><span class="s5">, </span><span class="s6">475</span><span class="s5">, </span><span class="s1">quitTex</span><span class="s5">, </span><span class="s1">surface) 
 
    </span><span class="s0">while True</span><span class="s2">:</span><span class="s1"> 
 
        </span><span class="s3"># Setea el reloj</span><span class="s1"> 
        clock.tick(FPS) 
 
        </span><span class="s3"># Busca eventos de aplicacion</span><span class="s1"> 
        </span><span class="s0">for </span><span class="s1">event </span><span class="s0">in </span><span class="s1">pygame.event.get()</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">event.type </span><span class="s2">== </span><span class="s1">QUIT</span><span class="s2">:</span><span class="s1"> 
                exit() 
 
        </span><span class="s3"># Dibuja la pantalla</span><span class="s1"> 
        surface.fill(COLOR_Black) 
 
        </span><span class="s0">if </span><span class="s1">play.inArea(mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">,</span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">])</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">mouse.get_pressed()[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">:</span><span class="s1"> 
                </span><span class="s0">return</span><span class="s1"> 
            play.im </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
        </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
            play.im </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
        </span><span class="s0">if </span><span class="s1">restart.inArea(mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">,</span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">])</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">mouse.get_pressed()[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">:</span><span class="s1"> 
                player1.restart() 
                Mat.restart() 
                </span><span class="s0">return</span><span class="s1"> 
            restart.im </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
        </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
            restart.im </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
        </span><span class="s0">if </span><span class="s1">quitB.inArea(mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">,</span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">])</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">mouse.get_pressed()[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">:</span><span class="s1"> 
                exit() 
                </span><span class="s0">return</span><span class="s1"> 
            quitB.im </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
        </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
            quitB.im </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
        play.draw() 
        restart.draw() 
        quitB.draw() 
 
        pygame.display.flip() 
 
</span><span class="s0">def </span><span class="s1">GameOver()</span><span class="s2">:</span><span class="s1"> 
 
    restart </span><span class="s2">= </span><span class="s1">Button(winWidth </span><span class="s2">/ </span><span class="s6">2</span><span class="s5">, </span><span class="s6">375</span><span class="s5">, </span><span class="s1">restartTex</span><span class="s5">, </span><span class="s1">surface) 
    quitB </span><span class="s2">= </span><span class="s1">Button(winWidth</span><span class="s2">/</span><span class="s6">2</span><span class="s5">, </span><span class="s6">475</span><span class="s5">,</span><span class="s1">quitTex</span><span class="s5">,</span><span class="s1">surface) 
 
    </span><span class="s0">while True</span><span class="s2">:</span><span class="s1"> 
 
        </span><span class="s3"># Setea el reloj</span><span class="s1"> 
        clock.tick(FPS) 
 
        </span><span class="s3"># Busca eventos de aplicacion</span><span class="s1"> 
        </span><span class="s0">for </span><span class="s1">event </span><span class="s0">in </span><span class="s1">pygame.event.get()</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">event.type </span><span class="s2">== </span><span class="s1">QUIT</span><span class="s2">:</span><span class="s1"> 
                exit() 
 
        </span><span class="s3"># Dibuja la pantalla</span><span class="s1"> 
        surface.fill(COLOR_Black) 
 
        </span><span class="s0">if </span><span class="s1">quitB.inArea(mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">,</span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">])</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">mouse.get_pressed()[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">:</span><span class="s1"> 
                exit() 
                </span><span class="s0">return</span><span class="s1"> 
            quitB.im </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
        </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
            quitB.im </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
        </span><span class="s0">if </span><span class="s1">restart.inArea(mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">,</span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">])</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">mouse.get_pressed()[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">:</span><span class="s1"> 
                player1.restart() 
                Mat.restart() 
                </span><span class="s0">return</span><span class="s1"> 
            restart.im </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
        </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
            restart.im </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
        surface.blit(gameOverScreen</span><span class="s5">,</span><span class="s1">(</span><span class="s6">0</span><span class="s5">,</span><span class="s6">0</span><span class="s1">)) 
        quitB.draw() 
        restart.draw() 
 
 
        pygame.display.flip() 
 
 
Menu() 
</span><span class="s3"># Entra en bucle principal</span><span class="s1"> 
</span><span class="s0">while True</span><span class="s2">:</span><span class="s1"> 
 
    </span><span class="s3"># Setea el reloj</span><span class="s1"> 
    clock.tick(FPS) 
 
    </span><span class="s3"># Busca eventos de aplicacion</span><span class="s1"> 
    </span><span class="s0">for </span><span class="s1">event </span><span class="s0">in </span><span class="s1">pygame.event.get()</span><span class="s2">:</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s1">event.type </span><span class="s2">== </span><span class="s1">QUIT</span><span class="s2">:</span><span class="s1"> 
            exit() 
 
    </span><span class="s3">###########PRUEBA</span><span class="s1"> 
    </span><span class="s0">if </span><span class="s1">keys.get_pressed()[K_p]</span><span class="s2">:</span><span class="s1"> 
        Menu() 
 
    </span><span class="s0">if </span><span class="s1">pausa.inArea(mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">, </span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">])</span><span class="s2">:</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s1">mouse.get_pressed()[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">:</span><span class="s1"> 
            Menu() 
        pausa.im </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
    </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
        pausa.im </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
 
    base </span><span class="s2">= </span><span class="s1">mouse.get_pos()[</span><span class="s6">0</span><span class="s1">] </span><span class="s2">- </span><span class="s1">player1.x 
    altura </span><span class="s2">= </span><span class="s1">marDown </span><span class="s2">- </span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">] 
 
    </span><span class="s0">if </span><span class="s1">keys.get_pressed()[K_w] </span><span class="s0">and </span><span class="s1">player1.bolitasQuietas() </span><span class="s0">and </span><span class="s1">b </span><span class="s2">== </span><span class="s6">0</span><span class="s2">:</span><span class="s1"> 
        player1.lanzarBolita(</span><span class="s6">0</span><span class="s5">,</span><span class="s1">base</span><span class="s5">,</span><span class="s1">altura) 
        player1.base </span><span class="s2">= </span><span class="s1">base 
        player1.altura </span><span class="s2">= </span><span class="s1">altura 
        a </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
 
    </span><span class="s0">if </span><span class="s1">a </span><span class="s2">&gt; </span><span class="s6">0 </span><span class="s0">and </span><span class="s1">a </span><span class="s2">&lt; </span><span class="s1">player1.numBolitas</span><span class="s2">*</span><span class="s1">pix</span><span class="s2">:</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s1">a</span><span class="s2">%</span><span class="s1">pix </span><span class="s2">== </span><span class="s6">0</span><span class="s2">:</span><span class="s1"> 
            player1.lanzarBolita(a</span><span class="s2">/</span><span class="s1">pix</span><span class="s5">,</span><span class="s1">player1.base</span><span class="s5">,</span><span class="s1">player1.altura) 
        a</span><span class="s2">+=</span><span class="s6">1</span><span class="s1"> 
 
 
    player1.checkPrimeraBola() 
 
    choques </span><span class="s2">= </span><span class="s0">False</span><span class="s1"> 
    </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">player1.bolitas</span><span class="s2">:</span><span class="s1"> 
        choques </span><span class="s2">= </span><span class="s1">choques </span><span class="s0">or </span><span class="s1">Mat.testColision(i) 
 
    </span><span class="s0">if not </span><span class="s1">choques</span><span class="s2">:</span><span class="s1"> 
        c </span><span class="s2">+= </span><span class="s6">1</span><span class="s1"> 
    </span><span class="s0">else</span><span class="s2">:</span><span class="s1"> 
        c </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
    </span><span class="s0">if </span><span class="s1">c </span><span class="s2">== </span><span class="s6">360</span><span class="s2">:</span><span class="s1"> 
        </span><span class="s0">for </span><span class="s1">bola </span><span class="s0">in </span><span class="s1">player1.bolitas</span><span class="s2">:</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s1">bola.vely </span><span class="s2">!= </span><span class="s6">0 </span><span class="s0">or </span><span class="s1">bola.velx </span><span class="s2">!= </span><span class="s6">0</span><span class="s2">:</span><span class="s1"> 
                base </span><span class="s2">= </span><span class="s1">randint(</span><span class="s6">1</span><span class="s5">, </span><span class="s6">100</span><span class="s1">) 
                altura </span><span class="s2">= </span><span class="s1">randint(</span><span class="s6">1</span><span class="s5">, </span><span class="s6">100</span><span class="s1">) 
 
                </span><span class="s0">if </span><span class="s1">base </span><span class="s2">&gt; </span><span class="s6">0 </span><span class="s0">and </span><span class="s1">float(altura) </span><span class="s2">/ </span><span class="s1">base </span><span class="s2">&lt; </span><span class="s1">tan(pi </span><span class="s2">/ </span><span class="s6">18</span><span class="s1">)</span><span class="s2">:</span><span class="s1"> 
                    base </span><span class="s2">= </span><span class="s1">cos(pi </span><span class="s2">/ </span><span class="s6">18</span><span class="s1">) 
                    altura </span><span class="s2">= </span><span class="s1">sin(pi </span><span class="s2">/ </span><span class="s6">18</span><span class="s1">) 
                </span><span class="s0">elif </span><span class="s1">base </span><span class="s2">&lt; </span><span class="s6">0 </span><span class="s0">and </span><span class="s1">(</span><span class="s2">-</span><span class="s6">1</span><span class="s1">) </span><span class="s2">* </span><span class="s1">float(altura) </span><span class="s2">/ </span><span class="s1">base </span><span class="s2">&lt; </span><span class="s1">tan(pi </span><span class="s2">/ </span><span class="s6">18</span><span class="s1">)</span><span class="s2">:</span><span class="s1"> 
                    base </span><span class="s2">= </span><span class="s1">(</span><span class="s2">-</span><span class="s6">1</span><span class="s1">) </span><span class="s2">* </span><span class="s1">cos(pi </span><span class="s2">/ </span><span class="s6">18</span><span class="s1">) 
                    altura </span><span class="s2">= </span><span class="s1">sin(pi </span><span class="s2">/ </span><span class="s6">18</span><span class="s1">) 
                bola.lanzar(base</span><span class="s5">, </span><span class="s1">altura) 
 
    </span><span class="s0">if </span><span class="s1">c </span><span class="s2">&gt;= </span><span class="s6">480</span><span class="s2">:</span><span class="s1"> 
        c </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
 
    </span><span class="s0">if </span><span class="s1">player1.checkUltimaBola() </span><span class="s2">&gt; </span><span class="s6">0</span><span class="s2">:</span><span class="s1"> 
        b </span><span class="s2">= </span><span class="s6">1</span><span class="s1"> 
 
    player1.updateBolitas() 
 
    </span><span class="s0">if </span><span class="s1">b </span><span class="s2">&gt; </span><span class="s6">0</span><span class="s2">:</span><span class="s1"> 
        b </span><span class="s2">+= </span><span class="s6">1</span><span class="s1"> 
 
    </span><span class="s0">if </span><span class="s1">player1.bolitasQuietas()</span><span class="s2">:</span><span class="s1"> 
        c </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s1">b </span><span class="s2">== </span><span class="s6">10</span><span class="s2">:</span><span class="s1"> 
            Mat.nextLevel() 
            player1.numBolitas </span><span class="s2">= </span><span class="s1">len(player1.bolitas) 
            b </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
            a </span><span class="s2">= </span><span class="s6">0</span><span class="s1"> 
 
    </span><span class="s0">if </span><span class="s1">Mat.testDead()</span><span class="s2">:</span><span class="s1"> 
        GameOver() 
 
 
    </span><span class="s3">#Dibuja</span><span class="s1"> 
    </span><span class="s3"># Dibuja la pantalla</span><span class="s1"> 
    surface.fill(COLOR_Black) 
 
    </span><span class="s0">if </span><span class="s1">c </span><span class="s2">&gt;= </span><span class="s6">360</span><span class="s2">:</span><span class="s1"> 
        surface.blit(fondoAzarIm</span><span class="s5">, </span><span class="s1">(winWidth</span><span class="s2">/</span><span class="s6">2 </span><span class="s2">- </span><span class="s6">125</span><span class="s5">, </span><span class="s1">marUp </span><span class="s2">+ </span><span class="s6">100</span><span class="s1">)) 
 
    </span><span class="s0">if </span><span class="s1">Mat.contUniversal </span><span class="s2">&lt; </span><span class="s6">100</span><span class="s2">:</span><span class="s1"> 
        colorEspacio </span><span class="s2">= </span><span class="s1">COLOR_White[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">*</span><span class="s1">(</span><span class="s6">100 </span><span class="s2">- </span><span class="s1">Mat.contUniversal)</span><span class="s2">/</span><span class="s6">100</span><span class="s1"> 
        colorLinea </span><span class="s2">= </span><span class="s1">(colorEspacio</span><span class="s5">,</span><span class="s1">colorEspacio</span><span class="s5">,</span><span class="s1">colorEspacio) 
        pygame.draw.line(surface</span><span class="s5">, </span><span class="s1">colorLinea</span><span class="s5">, </span><span class="s1">[player1.x</span><span class="s5">, </span><span class="s1">marDown </span><span class="s2">- </span><span class="s1">player1.texBola.alto</span><span class="s2">/</span><span class="s6">2 </span><span class="s2">- </span><span class="s6">1</span><span class="s1">]</span><span class="s5">, </span><span class="s1">[mouse.get_pos()[</span><span class="s6">0</span><span class="s1">]</span><span class="s5">, </span><span class="s1">mouse.get_pos()[</span><span class="s6">1</span><span class="s1">]]</span><span class="s5">, </span><span class="s6">2</span><span class="s1">) 
 
    </span><span class="s3"># Dibuja los Margenes</span><span class="s1"> 
    pygame.draw.line(surface</span><span class="s5">, </span><span class="s1">COLOR_White</span><span class="s5">, </span><span class="s1">[</span><span class="s6">0</span><span class="s5">, </span><span class="s1">marUp]</span><span class="s5">, </span><span class="s1">[winWidth</span><span class="s5">, </span><span class="s1">marUp]</span><span class="s5">, </span><span class="s6">2</span><span class="s1">) 
    pygame.draw.line(surface</span><span class="s5">, </span><span class="s1">COLOR_White</span><span class="s5">, </span><span class="s1">[</span><span class="s6">0</span><span class="s5">, </span><span class="s1">marDown]</span><span class="s5">, </span><span class="s1">[winWidth</span><span class="s5">, </span><span class="s1">marDown]</span><span class="s5">, </span><span class="s6">2</span><span class="s1">) 
 
    player1.draw(mouse) 
    player1.drawNumBolitas() 
    Mat.draw() 
    pausa.draw() 
 
 
 
    </span><span class="s3"># Vuelca lo dibujado en pantalla</span><span class="s1"> 
    pygame.display.flip()</span></pre>
</body>
</html>